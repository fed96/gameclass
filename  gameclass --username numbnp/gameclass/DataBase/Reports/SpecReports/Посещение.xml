<?xml version="1.0" encoding="Windows-1251"?>
<CustomReportsListd><item id="{506E040B-8F61-4A67-9323-982EF88104C0}" name="Посещение" description="Отчет по посещениям. Пользуйтесь фильтрацией&#xA;--- &#xA;Author: NodaSoft&#xA;support@nodasoft.com" sqlcode="IF OBJECT_ID('tempdb..#t') IS NOT NULL DROP TABLE #t&#xA;&#xA;CREATE TABLE #t (&#xA;[id] [int] IDENTITY (1, 1) NOT NULL ,&#xA;[name] [varchar] (200) COLLATE Cyrillic_General_CI_AS NULL ,&#xA;[result] [varchar] (20) COLLATE Cyrillic_General_CI_AS NULL&#xA;) ON [PRIMARY]&#xA;&#xA;&#xA;DECLARE @count INT&#xA;SELECT @count=COUNT(id) from Accounts WHERE (isdeleted = 0) and (isenabled = 1)&#xA;INSERT INTO #t (name,result) VALUES (N'Всего в базе', CAST ( @count AS VARCHAR(255)) )&#xA;SELECT @count=COUNT(id) from Accounts WHERE (isdeleted = 0) and (isenabled = 1)&#xA;  and (SUBSTRING([name],1,1) &lt; '9') and (SUBSTRING([name],1,1) &gt; '0')&#xA;INSERT INTO #t (name,result) VALUES (N'из них студентов', CAST ( @count AS VARCHAR(255)) )&#xA;SELECT @count=COUNT(id) from Accounts WHERE (isdeleted = 0) and (isenabled = 1)&#xA;  and not((SUBSTRING([name],1,1) &lt; '9') and (SUBSTRING([name],1,1) &gt; '0'))&#xA;INSERT INTO #t (name,result) VALUES (N'из них преподавателей', CAST ( @count AS VARCHAR(255)) )&#xA;&#xA;SELECT @count=COUNT(S.id) from Accounts AS A&#xA;  INNER JOIN Sessions AS S ON A.id = S.idClients&#xA;  WHERE (isdeleted = 0) and (isenabled = 1)&#xA;  and ([started]  &gt;= %TIME-START%) and ([started]&lt;=%TIME-STOP%)&#xA;INSERT INTO #t (name,result) VALUES (N'Общее количество посещений  ', CAST ( @count AS VARCHAR(255)) )&#xA;SELECT @count=COUNT(S.id) from Accounts AS A&#xA;  INNER JOIN Sessions AS S ON A.id = S.idClients&#xA;  WHERE (isdeleted = 0) and (isenabled = 1) and (isenabled = 1)&#xA;  and ([started]  &gt;= %TIME-START%) and ([started]&lt;=%TIME-STOP%)&#xA;  and (SUBSTRING([name],1,1) &lt; '9') and (SUBSTRING([name],1,1) &gt; '0')&#xA;INSERT INTO #t (name,result) VALUES (N'из них студентов', CAST ( @count AS VARCHAR(255)) )&#xA;SELECT @count=COUNT(S.id) from Accounts AS A&#xA;  INNER JOIN Sessions AS S ON A.id = S.idClients&#xA;  WHERE (isdeleted = 0) and (isenabled = 1) and (isenabled = 1)&#xA;  and ([started]  &gt;= %TIME-START%) and ([started]&lt;=%TIME-STOP%)&#xA;  and not((SUBSTRING([name],1,1) &lt; '9') and (SUBSTRING([name],1,1) &gt; '0'))&#xA;INSERT INTO #t (name,result) VALUES (N'из них преподавателей', CAST ( @count AS VARCHAR(255)) )&#xA;&#xA;SELECT name [Описание], result [Значение] FROM #t order by [id] asc&#xA;&#xA;if object_id('tempdb..#t') is not null DROP TABLE #t" version="1" tabindex="33"/></CustomReportsListd>
