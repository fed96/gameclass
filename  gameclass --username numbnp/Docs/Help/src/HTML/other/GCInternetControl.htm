<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<link href="../scripts/style.css" rel="stylesheet" type="text/css">
<meta name="GENERATOR" content="Microsoft&reg; HTML Help Workshop 4.1">
<Title>GCInternetControl</Title>
<script language="JavaScript" src="../scripts/master.js"></script>
</HEAD>

<BODY topmargin="0" leftmargin="0">

<TABLE  border="0" cellspacing="0" cellpadding="1" width=100%>
<TR bgcolor="#D0D0FF" height="22">
<TD width="6"></TD>
<TD width="16"><A href="http://www.nodasoft.com/products/gc/"><IMG border="0" src="../img/home.gif" alt="Домашняя страница продукта"></A></TD>
<TD width="16"><A href="mailto:pm@nodasoft.com"><IMG border="0" src="../img/mail.gif" alt="Сообщить разрабтчикам свое мнение о данной статье "></A></TD>
<TD width="10"></TD>
<TD class="Part">Опциональные модули для GameClass</TD>
</TR>
</TABLE>

<TABLE class="Base" width=90%>
<TR>
<TD>
<BR>
<TABLE align="justify" width=100%>
  <TR>
    <TD WIDTH=100% VALIGN="height">
      <H1>GCInternetControl for Windows</H1>
    </TD>
    <TD>
     <IMG src="../img/module-traf.gif" alt="" align="right" border="0">
    </TD>
  </TR>
</TABLE>
<BR>
Модуль подсчета трафика для Windows может использоваться в двух вариантах.<br>
<br>
<b>Первый</b> - использование TCP-туннелей в программе GameClass совместно с любым прокси-сервером. В этом варианте подсчета трафика можно подсчитывать только TCP-трафик (т.е. это программы Internet Explorer, Mirc, ICQ и другие подобные, работающие через TCP). UDP-трафик не подсчитывается (а это большинство игр по интернету, например Counter-Strike и другие популярные игры). Преимущество первого варианта - простота внедрения.<br>
<a onclick="doSection(foo1)" class="anchorclass" href="#">Подробнее...</a>
<DIV CLASS="divclass" ID="foo1" STYLE="display: none"> 
<br>
<table cellspacing=0 cellpadding=10 border=3><tr><td>
Модуль подсчета трафика для <A href="gameclass.htm">GameClass</A> - это система маппингов, которые являются посредниками, встраиваясь 
между клиентом (например, Internet Explorer на клиентском компьютере) и прокси-сервером. Модуль подсчитывает трафик, а также блокирует/разблокирует 
его, в зависимости от тарифа - интернет разблокируется для тарифов, в которых установлена галочка "Интернет". Также для лучшего понимания работы модуля
необходимо понять, как должен идти трафик из интернета к клиентскому компьютеру: интернет<->Proxy Server<->GameClass<->клиентский компьютер.
<BR>
<BR>
<SPAN class="ArticleTitle">Подробнее о модуле</SPAN><br><br>
<b>1. Предварительная подготовка к использованию модуля</b><br>
<br>
Начнем с того, что интернет в Вашем клубе должен быть доступен на одном из компьютеров (назовем его "Интернет-сервером"). На этом компьютере необходимо
установить какой-нибудь прокси-сервер (он необходим для работы модуля контроля трафика). После того, как Интернет-Сервер настроен и работает,
необходимо добиться, чтобы прокси-сервер(а значит и возможность выйти в интернет с вашего клуба) был доступен только с машины оператора. Интернет должен 
быть доступен только с машины оператора, это гарантирует невозможность пустить трафик НЕ ЧЕРЕЗ модуль контроля трафика. Стоит 
заметить, что Интернет-сервер и машина оператора могут быть одним и тем же компьютером.<br>
<br>
<b>2. Активация модуля</b><br>
<br>
Для активации модуля необходим специальный лицензионный ключ. Если Вы успешно ввели ключ для модуля, то в окне "О программе" напротив имени модуля будет стоять "Да", 
что значит - модуль доступен для использования. Теперь в настройках программы можно активировать подсчет трафика.<br>
<br>
<b>3. Настройка модуля</b><br>
<br>
Вы можете настроить подсчет трафика для любой другой программы, использующей протокол TCP или имеющей возможность работы через SocksProxy (любые браузеры, ICQ, Mirc и т.д.). 
Приведем пример того, как настроить работу Internet Explorer на клиентских компьютерах через модуль подсчета трафика. Нужно сделать следующее:<br>
<ul>
<li><font color="green">Настроить прокси-сервер (HTTP-прокси) так, чтобы на компьютере с GameClass работал Internet Explorer через этот прокси.</font><br>
Как это сделать - описано выше в разделе <i>Предварительная подготовка к использованию модуля</i></li>. Вам нужно знать IP-адрес 
прокси-сервера и его TCP-порт. Назовем эти настройки ProxyIP и ProxyPort, соответственно.
<li><font color="green">Настроить маппинги в GameClass</font><br>
Указываете ProxyIP, ProxyPort и Listen Port. Значение ListenPort придумываете сами (этот порт должен быть не занят другими программами). К примеру можно 
поставить 8080 или 9090, или 8989. Добавляете один маппинг с указанными значениями. Это и будет маппинг для программы Internet Explorer.
</li>
<li><font color="green">Настроить Internet Explorer на каждом клиентском компьютере.</font><br>
Войдите в меню "Сервис\свойства обозревателя\подключения\настройка Lan". В открывшемся окне поставьте галочку "Использовать прокси-сервер для подключений
LAN". Введите ip-адрес компьютера, на котором запускается GameClass и порт, значение которого равно настройке Listen Port.
</li>
</ul>
Это был пример для программы Internet Explorer. Вы можете настроить подсчет трафика для любой программы, например для ICQ. Для этого Вам нужно настроить
SocksProxy на вашем прокси-сервере, добавить новый TCP-маппинг в GameClass а в ICQ указать "работать через Socks-Proxy", указав в качестве Socks-Proxy
адрес компьютера с GameClass и порт который вы придумали для этого маппинга.<br>
<br>
!!! Необходимо помнить, что подсчет трафика под Windows имеет специфическую особенность, которая состоит в том, что не подсчитывается служебная информация, присущая протоколу TCP/IP. Нельзя сказать точно, каково будет расхождение, но  в среднем это значение равно 20%. При скачивании больших файлов - ближе к 1% (большие TCP-пакеты), при работе в ICQ - ближе к 50% (маленькие TCP-пакеты). Есть два способа компенсировать это расхождение:<br>
1) заложить в стоимость мегабайта на 20% больше<br>
2) взять за размер мегабайта не 1024 кб, а меньше (выбрать нужный размер можно настройкой в разделе "трафик")<br>
<br>

<SPAN class="ArticleTitle"><font color="red">Внимание! Прочтите, чтобы избежать проблем с работой модуля:</font></SPAN><br>
Допустим, что вы все настроили как надо, но интернет на клиентских компьютерах все равно не работает. В чем же проблема? 
Причин может быть несколько:<br>
1. Должен быть запущен GameClass<br>
2. GameClass должен работать не под Менеджером (Менеджер - это только мониторинг, отчеты и настройка программы), а под оператором.<br>
3. В окне "О программе" напротив модуля GCInternetControl должно стоять "активирован"<br>
4. Сеанс должен быть запущен под тарифом, для которого в настройках тарифа установлена галочка "Интернет".
<br>
</td></tr></table>
</DIV>
<br>
<br>
<b>Второй</b> вариант - интеграция с популярным прокси сервером Traffic Inspector. В этом случае трафик раздается на клиенты с помощью NAT, а специальный плагин для Traffic Inspector взаимодействует с прокси-сервером, обеспечивая блокировку/разблокировку трафика в зависимости от сеанса а также подсчет трафика (съем трафика с Traffic Inspector). Преимущество этого способа - ПОЛНЫЙ учет трафика во всех программах, отсутствие необходимости настройки клиентских компьютеров.<br>
<a href="../../inet/ti/network.htm">Подробнее...</a><br>
<br>
<br>
</td></tr></table>
<br>
<P align="center">
<BR>
<BR>
<SPAN class="copyright"><A href="../copyrights.htm">&copy 2000-2007 NodaSoft. All Rights Reserved.</A>
</SPAN>
</P>
</TD>
</TR>
</TABLE>

<BR>
<BR>

</BODY>
</HTML>
